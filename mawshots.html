<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LR&HR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="gd-back" style="position: fixed; z-index: -1; width: 100%; height: 100%;"></div>
    <section id="Header">
      <div class="container rounded-3">
          <header class="d-flex justify-content-center py-3 b-clnav rounded-3 back-black">
            <ul class="nav nav-pills">
              <li class="nav-item">
                <a class="dll" href="./portfolio.html">
                  <button class="btn btn-primary rounded-pill px-3" type="button" >Back</button>
                </a>
              </li>
              <button class="btn btn-primary rounded-pill px-3 ms-3" data-bs-toggle="modal" data-bs-target="#addimage">Add new image</button><!--onclick="addElement()"-->
            </ul>
          </header>
        </div>
        <div class="container rounded-3">
            <header class="d-flex justify-content-center py-3 b-clnav rounded-3 back-black">
                <div class="input-group me-3" style="width: 400px;">
                    <label class="input-group-text" for="inputGroupSelect01">Comission type:</label>
                    <select class="form-select" id="filterimgType">
                        <option selected>...</option>
                        <option value="mawshot">Mawshot</option>
                        <option value="booba">Booba</option>
                        <option value="pisa">Pisa</option>
                        <option value="popa">Popa </option>
                        <option value="sex">Sex </option>
                    </select>
                </div>
              <button class="btn btn-primary rounded-pill" onclick="filter()">Search</button>
            </header>
          </div>
    </section>
    
    
    <section id="mawshots" class="mb-3">
     <div class="container">
      <div class="row" style="align-items: start;">
        <div id="col1" class="column">
          <a style="display: block;" id="imgmaw1" data-kind="mawshot" type="button" data-bs-toggle="modal" data-bs-target="#maw1">
            <img src="./images/mawshots/maw1.png" >
          </a>
          <a style="display: block;" id="imgmaw2" data-kind="mawshot" type="button" data-bs-toggle="modal" data-bs-target="#maw2">
            <img src="./images/mawshots/maw2.png" >
          </a>
        </div>
        <div id="col2" class="column">
            <a style="display: block;" id="imgmaw3" data-kind="mawshot" type="button" data-bs-toggle="modal" data-bs-target="#maw3">
                <img src="./images/mawshots/maw3.png" >
            </a>
        </div>
        <div id="col3" class="column">
            <a style="display: block;" id="imgmaw4" data-kind="mawshot" type="button" data-bs-toggle="modal" data-bs-target="#maw4">
                <img src="./images/mawshots/maw4.jpg" >
            </a>
        </div>
        <div id="col4" class="column">
            <a style="display: block;" id="imgmaw5" data-kind="mawshot" type="button" data-bs-toggle="modal" data-bs-target="#maw5">
                <img src="./images/mawshots/maw5.jpg" >
            </a>
        </div>
        
      </div>
     </div>
    </section>

    <section id="sukauploadimage">
        <div class="modal fade" id="addimage" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Upload new image</h5>
                    <div id="delete_button" class="my-btn rounded-1" data-bs-dismiss="modal"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                    </svg></div>
                  </div>
                  <div class="modal-body">
                    <input class="ms-3" style="background-color: white; border-radius: 3px; padding: 6px 12px;" id="upimg" type="file" onchange="updateButton()"><!--onchange="showFile(this)"-->
                  </div>
                  <div class="modal-footer">
                    <div class="input-group">
                        <label class="input-group-text" for="inputGroupSelect01">Comission type:</label>
                        <select class="form-select" id="imgType">
                            <option selected>...</option>
                            <option value="mawshot">Mawshot</option>
                            <option value="booba">Booba</option>
                            <option value="pisa">Pisa</option>
                            <option value="popa">Popa </option>
                            <option value="sex">Sex </option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-dark btn-imp" disabled onclick="addElement(); document.querySelector('#upimg').value=''; document.querySelector('#addimage .btn-dark').disabled = true" data-bs-dismiss="modal" >Upload image</button>
                  </div>
                  <script>
                    function updateButton(){
                        let button = document.querySelector("#addimage .btn-dark");
                        button.disabled = false;
                    }
                  </script>
                </div>
              </div>
          </div>
    </section>

    <section id="allmodal">
        <div class="modal fade" id="maw1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered justify-content-center">
                <div class="modal-body py-0">
                    <img src="./images/mawshots/maw1.png" alt="" height="650px">
                </div>
            </div>
        </div>
        <div class="modal fade" id="maw2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered justify-content-center">
                <div class="modal-body py-0">
                    <img src="./images/mawshots/maw2.png" alt="" height="650px">
                </div>
            </div>
        </div>
        <div class="modal fade" id="maw3" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered justify-content-center">
                <div class="modal-body py-0">
                    <img src="./images/mawshots/maw3.png" alt="" height="650px">
                </div>
            </div>
        </div>
        <div class="modal fade" id="maw4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered justify-content-center">
                <div class="modal-body py-0">
                    <img src="./images/mawshots/maw4.jpg" alt="" height="650px">
                </div>
            </div>
        </div>
        <div class="modal fade" id="maw5" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered justify-content-center">
                <div class="modal-body py-0">
                    <img src="./images/mawshots/maw5.jpg" alt="" height="650px">
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <template id="imgtemp">
        <a style="display: block;" id="imgmaw5" type="button" data-bs-toggle="modal" data-bs-target="#maw5">
            <img src="./images/mawshots/maw5.jpg" >
        </a>
    </template>
    <template id="modaltemp">
        <div class="modal fade" id="maw5" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered justify-content-center">
                <div id="modalimg" class="modal-body py-0">
                    <img src="./images/mawshots/maw5.jpg" alt="" height="650px">
                </div>
            </div>
        </div>
    </template>
</body>
<script>
    let imgIndex= 6;
    // function showFile(input) {
    //     let file = input.files[0];
    //     let reader = new FileReader();
    //     reader.readAsDataURL(file);
    //     let img = URL.createObjectURL(file);
    //     reader.onload = function() {
    //         console.log(reader.result);
    //     };
    //     console.log(img);
    //     alert(`File name: ${file.name}`); // например, my.png
    //     alert(`Last modified: ${file.lastModified}`); // например, 1552830408824
    // }
    function addElement() {
        //подучить компаратор
        //лямбда
        let column = Array.from(document.querySelectorAll("#col1, #col2, #col3, #col4")).reduce((prev, curr)=>{
            return prev.clientHeight < curr.clientHeight ? prev : curr;
        });
        //console.log(column);

        let newImage = document.getElementById("imgtemp").content.cloneNode(true);
        let uploadImage = document.getElementById("upimg").files[0];
        let i = URL.createObjectURL(uploadImage);
        newImage.getElementById("imgmaw5").innerHTML = `<img src=${i} >`
        // newImage.getElementById("imgmaw5").setAttribute('data-bs-target', `#maw${imgIndex}`)
        newImage.getElementById("imgmaw5").dataset.bsTarget = `#maw${imgIndex}`;
        newImage.getElementById("imgmaw5").dataset.kind = document.getElementById("imgType").value;
        newImage.querySelector("#imgmaw5 img").style.borderRadius = "10px";
        let currentDiv=column;
        currentDiv.appendChild(newImage);

        let newModel = document.getElementById("modaltemp").content.cloneNode(true);
        newModel.getElementById("modalimg").innerHTML = `<img src=${i} alt="" height="650px">`
        newModel.getElementById("maw5").id = `maw${imgIndex}`;
        let currentModal = document.getElementById("allmodal");
        currentModal.appendChild(newModel);
        imgIndex+=1;
    }

    let isActive = true;
    function filter(){
        let kind = document.querySelector("#filterimgType").value;
        let allImages=Array.from(document.querySelectorAll(`[data-kind]`));
        let kindedImages=allImages.filter((e) => e.dataset.kind== kind);
        if(isActive){
            allImages.forEach(img => {
                img.style.display = "none";
            });
            kindedImages.forEach(img => {
                img.style.display = "block";
            });
            isActive=false;
        }
        else{
            allImages.forEach(img => {
                img.style.display = "block";
            });
            kindedImages.forEach(img => {
                img.style.display = "none";
            });
            isActive=true;
        }
    }
</script>
</html>